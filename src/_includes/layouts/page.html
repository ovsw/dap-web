{% extends "layouts/base.html" %}
{% set pageCriticalStyles = ['css/page.css'] %}

{% block content %}

<script>console.log({{sitePage.content | dump | safe}})</script>

{% if sitePage.content.mainImage %}
  
<style>
  .page-header {
    background-image: url('{% croppedUrlFor sitePage.content.mainImage, "400", "400" %}');
  }

  @media screen and (min-width: 400px) {
      .page-header {
        background-image: url('{% croppedUrlFor sitePage.content.mainImage, "800", "400" %}');
      }
  }
  @media screen and (min-width: 800px) {
      .page-header {
        background-image: url('{% croppedUrlFor sitePage.content.mainImage, "1200", "400" %}');
      }
  }
    @media screen and (min-width: 1200px) {
      .page-header {
        background-image: url('{% croppedUrlFor sitePage.content.mainImage, "1600", "400" %}');
      }
  }
</style>
{% endif %}
<div class="[ page-header ]">

  <div class="page-header__content [ wrapper pannel ]" >
    <h1 >{{sitePage.content.title}}</h1>
  </div>
</div>

{% set bigHeaderCounter = 0 %}


{% for section in sitePage.content.sections %}

  {% if section._type == 'bigHeading' %}
    {% set bigHeaderCounter = bigHeaderCounter + 1 %}
    {% set bigHeaderNumberedString %}
      {{bigHeaderCounter}}. {{section.title}} 
    {% endset %}
    {% include "sections/big-heading-section.html" %}
  {% endif %}

  {% if section._type == 'ctaSection' %}
    {% include "sections/cta-section.html" %}
  {% endif %}
  {% if section._type == 'magSection' %}
    {% include "sections/mag-section.html" %}
  {% endif %}
  {% if section._type == 'tableSection' %}
    {% include "sections/table-section.html" %}
  {% endif %}
  {% if section._type == 'cardSection' %}
    {% include "sections/card-section.html" %}
  {% endif %}


  {# {% switch section._type %}
      {% case 'bigHeading' %}
        {% set bigHeaderCounter = bigHeaderCounter + 1 %}
        {% set bigHeaderNumberedString %}
        {{bigHeaderCounter}}. {{section.title}} 
        {% endset %}
       {{bigHeadingSection(title = bigHeaderNumberedString) }}
      {% case 'magSection' %}
        {{magSection(
          eyebrow = "Park News",
          heading = section.title,
          subHeading = section.subtitle,
          sanityImage = section.image,
          imageAlt = section.image.alt,
          content = section.text | blocksToMarkdown | markdownify | safe,
          buttonText = "Event Details",
          buttonLink = "#",
          variant = section.theme
        )}}
      {% case 'ctaSection' %}
        {{ctaSection(
            heading = section.title,
            subHeading = section.subtitle,
            buttonText = section.button1.text,
            buttonLink = section.button1.url,
            sanityImage = section.image,
            imageAlt = section.image.alt,
            content = section.text | blocksToMarkdown | markdownify | safe,
            variant = section.theme
        )}}
      {% case 'tableSection' %}
        {{tableSection(sectionData = section)}}
      {% case 'cardSection' %}
        {{cardSection(sectionData = section)}}
    {% endswitch %} #}
{% endfor %}

{% endblock %}